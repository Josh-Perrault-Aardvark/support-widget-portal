<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact Us</title>
  <style>
    :root { --bg:#f8faf8; --card:#fff; --border:#eaeaea; --text:#111; --muted:#616161; }
    * { box-sizing: border-box; }
    html, body {
      height: 100%; margin: 0; background: var(--bg); color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }
    .wrap { min-height: 100vh; display: grid; place-items: center; padding: 32px; }
    .card {
      width: 100%; max-width: 960px; background: var(--card); border: 1px solid var(--border);
      border-radius: 16px; padding: 24px; box-shadow: 0 6px 24px rgba(0,0,0,.06);
    }
    .card h1 { margin: 0 0 8px; font-size: 28px; }
    .muted { color: var(--muted); margin: 0 0 16px; }
    #form-anchor { min-height: 640px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Contact Us</h1>
      <p class="muted">Have a question? Please submit your message below and we will respond to you via email as soon as we can!</p>
      <div id="form-anchor"></div>
    </div>
  </div>

  <!-- HubSpot Forms v2 embed -->
  <script src="https://js.hsforms.net/forms/embed/v2.js" charset="utf-8"></script>
  <script>
    // pull email from ?email=... or #email=...
    function getEmail() {
      const qs = new URLSearchParams(location.search);
      const hash = location.hash.startsWith('#') ? new URLSearchParams(location.hash.slice(1)) : null;
      return (qs.get('email') || (hash && hash.get('email')) || '').trim();
    }

    hbspt.forms.create({
      region: "na1",
      portalId: "45880416",
      formId: "e6aec654-2411-411d-9124-4dc25a5ab8d6",
      target: "#form-anchor",

      onFormReady: function ($form) {
        // Prefill + hide Email
        const email = getEmail();
        const $email = $form.find('input[name="email"]');
        if ($email.length) {
          if (email) $email.val(email).trigger('input').trigger('change');
          $email.attr('type','hidden').hide();
          $email.closest('.hs-form-field, fieldset, .hs_email').hide();
          const id = $email.attr('id'); if (id) $form.find('label[for="'+id+'"]').hide();
        }

        // --- Make the textarea taller (works for both classic & new HubSpot markup) ---
        // Selectors weâ€™ll force-height:
        const TA_SELECTORS = [
          'textarea.hsfc-TextareaInput',      // new (what you have)
          'textarea.hs-input',                // classic
          'textarea[name$="/message"]',       // safety: name like 0-1/message
          'textarea[name="message"]'
        ].join(',');

        // Inject CSS *inside the iframe* so it always wins
        const doc = $form.closest('html')[0].ownerDocument;
        const styleTag = doc.createElement('style');
        styleTag.type = 'text/css';
        styleTag.appendChild(doc.createTextNode(`
          ${TA_SELECTORS} {
            min-height: 360px !important;
            height: 360px !important;
            overflow: auto !important;
            line-height: 1.4;
            padding: 12px;
            resize: vertical;
          }
        `));
        doc.head.appendChild(styleTag);

        // Backstop: directly set inline styles on any matching textarea
        function forceSize() {
          $form.find(TA_SELECTORS).each(function(){
            this.style.minHeight = '360px';
            this.style.height    = '360px';
            this.style.overflow  = 'auto';
            this.style.resize    = 'vertical';
            // rows helps some themes
            this.setAttribute('rows','12');
          });
        }
        forceSize();

        // Re-apply a few times in case HubSpot late-styles fields
        let n = 0;
        const iv = setInterval(() => { forceSize(); if (++n >= 10) clearInterval(iv); }, 250);

        // Optional: auto-grow while typing (feels nice)
        $form.on('input', TA_SELECTORS, function(){
          this.style.height = 'auto';
          this.style.height = Math.max(this.scrollHeight, 360) + 'px';
        });
      }
    });
  </script>
</body>
</html>
